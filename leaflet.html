<!DOCTYPE html>
<html>
  <head>
    <title>tiles</title>
    <meta http-equiv="imagetoolbar" content="no">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.css">
    <link rel="stylesheet" href="https://cdn.rawgit.com/ardhi/Leaflet.MousePosition/master/src/L.Control.MousePosition.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.3.1/leaflet.js" type="text/javascript"></script>
    <script src="https://cdn.rawgit.com/ardhi/Leaflet.MousePosition/master/src/L.Control.MousePosition.js" type="text/javascript"></script>
    <!-- GeoJson with locations
    <script src="./cafes.geojson" type="text/javascript"></script>
    -->
    <style>
      body { margin:0; padding:0; width:100%; height:100%; background: #ffffff; }
      #map { position:absolute; top:0; bottom:0; width:100%; z-index: 1; }
      <!---
      #slider{ position: absolute; top: 10px; right: 10px; z-index: 5; }
      -->
    </style>
  </head>
<body>
  <div id="map"></div>
  <!-- Add jQuery -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://unpkg.com/leaflet@1.0.3/dist/leaflet.js"></script>
  <input id="slider" type="range" min="0" max="1" step="0.1" value="1" oninput="layer.setOpacity(this.value)">
  <script type="text/javascript">
    var mapExtent = [34.94550791, 32.79332658, 35.02807273, 32.84930282];
    var mapMinZoom = 12;
    var mapMaxZoom = 17;
    var bounds = new L.LatLngBounds(
      new L.LatLng(mapExtent[1], mapExtent[0]),
      new L.LatLng(mapExtent[3], mapExtent[2]));
    var map = L.map('map').fitBounds(bounds);
    var layer;
    var options = {
      minZoom: mapMinZoom,
      maxZoom: mapMaxZoom,
      opacity: 1.0,
      attribution: 'Rendered with <a href="https://www.maptiler.com/desktop/">MapTiler Desktop</a>',
      tms: false
    };
    layer = L.tileLayer('{z}/{x}/{y}.jpg', options).addTo(map);
    
	$.getJSON("cafes.geojson",function(data){
	  L.geoJson(data,{
	pointToLayer: function(feature,latlng){
	 var thisIcon = L.icon({
		iconUrl: feature.properties.ICON,
		iconSize: [20,20]
	  });
	  var marker = L.marker(latlng,{icon: thisIcon});
	  marker.bindPopup('<font size="+2">'+feature.properties.NAME+'</font>'+'<br/>'+ '<b>' +'Owner: ' + '</b>' + feature.properties.OWNER + '<br/><b>'+ '1948 Address: '+ '</b>' + feature.properties.ADDRESS1 + '<br/><b>'+ 'Current Address: '+ '</b>' + feature.properties.ADDRESS2 + '<br/>' + feature.properties.WIKI + '<br/>' + '<img src="'+feature.properties.IMG+'" width="250">'+ '<br/>' + feature.properties.COMMENT);
	  return marker;
	}
	  }).addTo(map);
	});
  </script>
</body>
</html>
